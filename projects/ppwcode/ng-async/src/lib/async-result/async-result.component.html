<mtx-loader [loading]="pending" type="progressbar">
    @if (asyncResult) {
        <ng-container
            *ngTemplateOutlet="
                hasFailed ? failed : isInitial ? initialTemplate ?? null : successTemplate;
                context: { $implicit: asyncResult }
            "
        >
        </ng-container>
    }
</mtx-loader>

<ng-template #failed>
    <ppw-message-bar
        [message]="asyncResult!.error?.message ?? '' | translate"
        [severity]="errorSeverity"
    ></ppw-message-bar>
</ng-template>
